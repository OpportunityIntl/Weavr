/* OI-Validate v0.11.1 
 * Copyright (c) 2016 Opportunity International 
 */
!function(a){a.fn.validate=function(b){return this.each(function(){a(this).data("oi-validate")||a(this).data("oi-validate",new Validator(a(this),b))})}}(jQuery);var Validator=function(a,b){function c(a){var b=$(a).data("oi-validate");return b?b:!1}function d(a,b){var d=c($(a))||{};data=$.extend(d,b),$(a).data("oi-validate",data)}function e(a,b){var e=c(a)||{validations:[],element:$(a),errorMessages:[]};e.validations.push(b),$(a).is("select")&&(e.element=$(a).parents(".select")),$(a).is('input[type="radio"]')&&(e.element=$(a).siblings('[name="'+$(a).attr("name")+'"]').next("label")),$(a).is('input[type="checkbox"]')&&(e.element=$(a).siblings('label[for="'+$(a).attr("id")+'"]')),d($(a),e)}function f(){$.each(n.options.fieldValidations,function(a,b){n.validations.push(b)}),$.each(n.validations,function(a,b){$(n.form.find(b.field)).each(function(a,c){if($(c).is('input[type="radio"]')){if(n.fields.filter('input[type="radio"][name="'+$(c).attr("name")+'"]').length>0)return;c=n.form.find('input[type="radio"][name="'+$(c).attr("name")+'"]')}n.addField($(c)),e($(c),b)})})}function g(a,b){var c=$(this).find(".alert");c.length>0&&c.remove(),c=$("<div>",{"class":"alert "+(b?b:"error"),style:"display: none;"}),$(this).prepend(c),c.html(a),c.slideDown(500),l(n.form,500,{offset:-40})}function h(){var a=$(this).find(".alert");a.slideUp(500,function(){a.remove()})}function i(a){var b="<p><strong>Looks like there are some problems with the highlighted fields. Please address the following errors:</strong></p>";return b+="<ul>",$.each(a,function(a,c){b+="<li>"+c+"</li>"}),b+="</ul>"}function j(a){var b=a.find('input[type="submit"], button[type="submit"]'),c=$("<button>",{type:"button","class":b.attr("class")+" processing-btn",disabled:!0});c.html('<span class="loading-indicator monochromatic">Processing...</span>'),b.hide(),b.after(c)}function k(a){var b=a.find('input[type="submit"], button[type="submit"]');b.show(),a.find(".processing-btn").hide()}function l(a,b,c){c=c||{};var d=Math.ceil(a.offset().top+(c.offset||0));$("body,html").stop(!0,!0).animate({scrollTop:d},b)}function m(){n.form.attr("novalidate","novalidate"),n.form.submit(function(){return n.options.onSubmit.call(n,n.form)===!1?!1:(n.hideErrors(),n.validateOnBlur(!1),n.validate()?"function"==typeof n.options.onSuccess&&n.options.onSuccess.call(n,n.form)===!1?!1:void 0:(n.displayErrors(),n.validateOnBlur(!0),"function"==typeof n.options.onError&&n.options.onError.call(n,n.form),!1))}),f(),n.options.onInit.call(n,n.form)}var n=this;this.options=$.extend({onInit:function(){},onSubmit:function(){},onError:function(){},onSuccess:function(){},showProcessing:j,hideProcessing:k,formValidations:[],fieldValidations:[],showAlert:g,hideAlert:h,alertMessage:i},b),this.validations=[{field:'input[type!="radio"][type!="checkbox"][required], select[required], textarea[required]',validation:function(a){return""!==a.val()},fieldMessage:"Required field",formMessage:"Please fill out missing fields"},{field:'input[type="email"]',validation:function(a){var b=/^[0-9a-zA-Z][-.+_a-zA-Z0-9]*@([0-9a-zA-Z][-._0-9a-zA-Z]*\.)+[a-zA-Z]{2,6}$/;return b.test(a.val())},fieldMessage:"Invalid email address",formMessage:"Please enter valid email address"},{field:'input[type="radio"][required]',validation:function(a){var b=a.attr("name");return this.find('input[type="radio"][name="'+b+'"]:checked').length>0},fieldMessage:"Select an option",formMessage:"Please fill out missing fields"},{field:'input[type="checkbox"][required]',validation:function(a){return a.is(":checked")},fieldMessage:"Required field",formMessage:"Please fill out missing fields"}],this.form=$(a),this.fields=$(),this.errorMessages=[],this.validate=function(){var a=0;return n.fields.each(function(){n.validateField($(this))||a++}),$.each(n.options.formValidations,function(b,c){c.validation.call(n,n.form)||(c.formMessage&&n.errorMessages.push(c.formMessage),a++)}),a>0?!1:!0},this.validateField=function(a){var b=c(a),e=!0;return b&&$.each(b.validations,function(c,f){if(f.validation.call(n.form,a)){var g=b.errorMessages.indexOf(f.fieldMessage);-1!==g&&(b.errorMessages.splice(b.errorMessages.indexOf(f.fieldMessage),1),d(a,b),n.hideError(a,f.fieldMessage)),e=!0}else f.fieldMessage&&-1===b.errorMessages.indexOf(f.fieldMessage)&&(b.errorMessages.push(f.fieldMessage),d(a,b),n.displayError(a,f.fieldMessage)),f.formMessage&&n.errorMessages.push(f.formMessage),e=!1}),e},this.displayError=function(a,b){var d=c(a),e=$("<div>",{"class":"error-message",style:"display: none;"});return e.html(b),d.element.after(e),e.show(),d.element.addClass("error"),n},this.hideError=function(a,b){var d=c($(a)),e=(d.errorMessages.indexOf(b),d.element.siblings('.error-message:contains("'+b+'")'));return e.remove(),d.element.removeClass("error"),n},this.displayErrors=function(){if(0===n.errorMessages.length||"function"!=typeof n.options.alertMessage)return n;var a=n.errorMessages.reduce(function(a,b){return a.indexOf(b)<0&&a.push(b),a},[]),b=n.options.alertMessage.call(n,a);return n.alert(b),n},this.alert=function(a,b){return n.options.showAlert.call(n.form,a,b),n},this.hideAlert=function(){return n.options.hideAlert.call(n.form),n},this.hideErrors=function(){return n.hideAlert(),n.errorMessages=[],n.fields.each(function(a,b){var e=c(b);$.each(e.errorMessages,function(a,c){n.hideError($(b),c),e.errorMessages.splice(a,1),d($(b),e)})}),n},this.validateOnBlur=function(a){return a?n.fields.on("blur.validate change.validate",function(){n.validateField($(this))}):n.fields.off("blur.validate change.validate"),n},this.addField=function(a){return n.fields=n.fields.add(a),n},this.processing=function(a){return a?n.options.showProcessing.call(n,n.form):n.options.hideProcessing.call(n,n.form),n},m()};